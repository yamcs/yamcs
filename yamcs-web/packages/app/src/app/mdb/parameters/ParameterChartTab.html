<ng-container *ngIf="parameter$ | async as parameter">
  <div style="padding-left: 12px; padding-right: 12px; padding-top: 12px">
    <div class="plot-top-actions" *ngIf="range$ | async as range">
      <app-text-action icon="add_circle_outline" (click)="compareParameter()">
        Comparison
      </app-text-action>
      <span class="separator"></span>
      <app-text-action (click)="chooseRange()" icon="date_range"
                       [active]="range === 'CUSTOM'">
        <span *ngIf="range !== 'CUSTOM'">Date Range</span>
        <ng-container *ngIf="customStart$ | async as customStart">
          <ng-container *ngIf="customStop$ | async as customStop">
            <span *ngIf="range === 'CUSTOM'">
              {{ customStart | datetime }} -  {{ customStop | datetime }}
            </span>
          </ng-container>
        </ng-container>
      </app-text-action>
      <app-text-action (click)="loadLatest('PT1H')"
                       [active]="range === 'PT1H'">
        1 hour
      </app-text-action>
      <app-text-action (click)="loadLatest('PT6H')"
                       [active]="range === 'PT6H'">
        6 hours
      </app-text-action>
      <app-text-action (click)="loadLatest('PT12H')"
                       [active]="range === 'PT12H'">
        12 hours
      </app-text-action>
      <app-text-action (click)="loadLatest('P1D')"
                       [active]="range === 'P1D'">
        1 day
      </app-text-action>
      <app-text-action (click)="loadLatest('P2D')"
                       [active]="range === 'P2D'">
        2 days
      </app-text-action>
      <app-text-action (click)="loadLatest('P1W')"
                       [active]="range === 'P1W'">
        7 days
      </app-text-action>
      <app-text-action (click)="loadLatest('P2W')"
                       [active]="range === 'P2W'">
        14 days
      </app-text-action>
      <app-text-action (click)="loadLatest('P1M')"
                       [active]="range === 'P1M'">
        30 days
      </app-text-action>
    </div>
  </div>
  <div class="plot-container">
    <app-parameter-plot #plot
                        [xGrid]="true"
                        [xAxisHeight]="24"
                        [dataSource]="dataSource"
                        [stop]="missionTime"
                        [removableSeries]="true">
      <app-parameter-series [parameter]="parameter.qualifiedName"
                            [grid]="true"></app-parameter-series>
    </app-parameter-plot>
    <div class="zoom-actions">
      <div class="zoom-actions-inner mat-elevation-z1">
        <button mat-button (click)="plot.zoomIn()">
          <mat-icon>add</mat-icon>
        </button>
        <span class="separator"></span>
        <button mat-button (click)="plot.zoomOut()">
          <mat-icon>remove</mat-icon>
        </button>
      </div>
    </div>
    <ng-container *ngIf="dataSource.data$ | async as data">
      <ng-container *ngIf="!(dataSource.loading$ | async)">
        <div class="no-data-message" *ngIf="data.samples.length === 0">
          <span class="mat-caption" *ngIf="range$ | async as range" style="color: #777;">
            There is no data for this chart in
            <ng-container [ngSwitch]="range">
              <span *ngSwitchCase="'PT1H'">the last hour</span>
              <span *ngSwitchCase="'PT6H'">the last 6 hours</span>
              <span *ngSwitchCase="'PT12H'">the last 12 hours</span>
              <span *ngSwitchCase="'P1D'">the last 24 hours</span>
              <span *ngSwitchCase="'P2D'">the last 2 days</span>
              <span *ngSwitchCase="'P1W'">the last week</span>
              <span *ngSwitchCase="'P2W'">the last 2 weeks</span>
              <span *ngSwitchCase="'P1M'">the last month</span>
              <span *ngSwitchDefault>the selected range</span>
            </ng-container>
          </span>
        </div>
      </ng-container>
    </ng-container>
  </div>
</ng-container>
